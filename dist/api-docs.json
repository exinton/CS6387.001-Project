{
    "swagger": "2.0",
    "info": {
        "description": "Public-facing endpoints to interact with our API.",
        "version": "1.0.0",
        "title": "UTD Textbook Exchange"
    },
    "tags": [{
        "name": "Authenticate",
        "description": "For Authenticating requests"
    },
	  {
        "name": "my-books",
        "description": "User's textbook info"
    },
    {
        "name": "forSaleEntries",
        "description": "For operations on the 'For Sale List'"
    },
  	{
        "name": "transactions",
        "description": "For operations regarding transactions"
    },
    {
        "name": "salePrice",
        "description": "For operations regarding a book's sale price"
    }],
    "schemes": ["http"],
    "paths": {
        "/Authenticate": {
            "post": {
                "tags": ["Authenticate"],
                "summary": "Send a username and password in order to get an authorization token",
                "description": "",
                "operationId": "issueToken",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "username",
                    "in": "formData",
                    "description": "",
                    "required": true,
                    "type": "string",
                    "default": "wbr071000"
                },
                {
                    "name": "password",
                    "in": "formData",
                    "description": "",
                    "required": true,
                    "type": "string",
                    "default": "thisIsARandomPassword"
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200AuthenticationResult"
                        }
                    },
                    "401": {
                        "description": "Invalid credentials.",
                        "schema": {
                            "$ref": "#/definitions/401AuthenticationResult"
                        }
                    },
					          "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                }
            }
        },
        "/my-books/{userId}/{productionOrStubBooks}": {
            "get": {
                "tags": ["my-books"],
                "summary": "Get a list of user's required textbooks for all semesters",
                "description": "",
                "operationId": "getMyBooks",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "userId",
                    "in": "path",
                    "description": "ID of User whose books you want",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                },
				        {
                    "name": "productionOrStubBooks",
                    "in": "path",
                    "description": "either 'stub' or 'production'",
                    "required": true,
                    "type": "string",
                    "default": "stub"
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200myBooksResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/forSaleEntries/isbn/{isbn}": {
            "get": {
                "tags": ["forSaleEntries"],
                "summary": "Get a list of books for sale for the given ISBN",
                "description": "",
                "operationId": "getForSaleEntriesByIsbn",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "isbn",
                    "in": "path",
                    "description": "ISBN of book for which you want listings for sale.",
                    "required": true,
                    "type": "string",
                    "default": "9780133778816"
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200forSaleEntriesIsbnGetResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/forSaleEntries/userId/{userId}": {
            "get": {
                "tags": ["forSaleEntries"],
                "summary": "Get a list of books for sale for the given User Id",
                "description": "",
                "operationId": "getForSaleEntriesByUser",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "userId",
                    "in": "path",
                    "description": "User Id of user for which you want listings for sale.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                    
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200forSaleEntriesUserGetResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/forSaleEntries": {
            "post": {
                "tags": ["forSaleEntries"],
                "summary": "Post a book for sale",
                "description": "",
                "operationId": "postBookForSale",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "isbn",
                    "in": "formData",
                    "description": "ISBN of the book being posted for sale.",
                    "required": true,
                    "type": "string",
                    "default": "9780133778816"
                },
				        {
                    "name": "author",
                    "in": "formData",
                    "description": "Author of the book being posted for sale.",
                    "required": true,
                    "type": "string",
                    "default": "Wallace Wang"
                },
                {
                    "name": "price",
                    "in": "formData",
                    "description": "Price of the book being posted for sale.",
                    "required": true,
                    "type": "number",
                    "format": "double",
                    "default": 32.99
                },
                {
                    "name": "condition",
                    "in": "formData",
                    "description": "Condition of the book being posted for sale.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                },
                {
                    "name": "description",
                    "in": "formData",
                    "description": "Description of the book being posted for sale.",
                    "required": true,
                    "type": "string",
                    "default": "Unused. Still in original packaging."
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200forSaleEntriesPostResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions/userId/{userId}": {
            "get": {
                "tags": ["transactions"],
                "summary": "Get a list of open transactions for the given User Id",
                "description": "",
                "operationId": "getTransactionsByUser",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "userId",
                    "in": "path",
                    "description": "User Id of user for which you want a list of open transactions.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200getTransactionResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions/{userId}/history": {
            "get": {
                "tags": ["transactions"],
                "summary": "Get transaction history for the given User Id",
                "description": "",
                "operationId": "getTransactionsHistoryByUser",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "userId",
                    "in": "path",
                    "description": "User Id for which you want transaction history.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200getTransactionResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions/transaction/{transactionId}": {
            "get": {
                "tags": ["transactions"],
                "summary": "Get the transaction specified by the given transaction Id",
                "description": "",
                "operationId": "getTransactionById",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "transactionId",
                    "in": "path",
                    "description": "Transaction Id of transaction you want.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200getTransactionResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions": {
            "post": {
                "tags": ["transactions"],
                "summary": "Buy a book",
                "description": "",
                "operationId": "buyBook",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "forSaleId",
                    "in": "formData",
                    "description": "forSaleId of the book being bought.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200buyBookResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions/status": {
            "get": {
                "tags": ["transactions"],
                "summary": "Get all the possible values for a Transaction's status, along with a description of each.",
                "description": "",
                "operationId": "getPossibleTransactionStatuses",
                "produces": ["application/json"],
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/transactionStatusRecord"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": []
            }
        },
        "/transactions/transaction/{transactionId}/complete": {
            "post": {
                "tags": ["transactions"],
                "summary": "Mark a transaction as complete, given the transaction Id",
                "description": "",
                "operationId": "markTransactionComplete",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "transactionId",
                    "in": "path",
                    "description": "Transaction Id of transaction.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200transactionCompleteResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/transactions/transaction/{transactionId}/cancel": {
            "post": {
                "tags": ["transactions"],
                "summary": "Mark a transaction as cancelled, given the transaction Id",
                "description": "",
                "operationId": "markTransactionCancelled",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "transactionId",
                    "in": "path",
                    "description": "Transaction Id of transaction.",
                    "required": true,
                    "type": "integer",
                    "format": "int",
                    "default": 1
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200transactionCancelResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/salePrice/suggested/isbn/{isbn}": {
            "get": {
                "tags": ["salePrice"],
                "summary": "Get the suggested sale price for the given isbn",
                "description": "",
                "operationId": "getSuggestedSalePrice",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "isbn",
                    "in": "path",
                    "description": "isbn of the book for which you want the suggested sale price.",
                    "required": true,
                    "type": "string",
                    "default": "9780133778816"
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200suggestedSalePriceResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        },
        "/salePrice/thirdParty/isbn/{isbn}": {
            "get": {
                "tags": ["salePrice"],
                "summary": "Get the third party sale price for the given isbn",
                "description": "",
                "operationId": "getThirdPartySalePrice",
                "produces": ["application/json"],
                "parameters": [{
                    "name": "isbn",
                    "in": "path",
                    "description": "isbn of the book for which you want the third party sale price.",
                    "required": true,
                    "type": "string",
                    "default": "9780133778816"
                }],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/200thirdPartySalePriceResult"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/401Result"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error.",
                        "schema": {
                            "$ref": "#/definitions/500Result"
                        }
                    }
                },
                "security": [{
                    "authorization": []
                }]
            }
        }
    },
    "securityDefinitions": {
        "authorization": {
            "type": "apiKey",
            "name": "authorization",
            "in": "header"
        }
        
    },
    "definitions": {
		"200AuthenticationResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": true
				      },
				      "token": {
					      "type": "string",
						  "default": "JWT eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.MQ.4p-Xcp_Aqs6evX2L8AylTbb1woTuxtlgL-Wg1QMXYYk"
				      }
			     }
		},
		"200myBooksResult": {
			    "type": "array",
			    "items": {
				      "$ref": "#/definitions/getRequiredTextbooksRecord"
			     }
		},
		"200forSaleEntriesIsbnGetResult": {
			    "type": "array",
			    "items": {
				      "$ref": "#/definitions/forSaleRecord"
			     }
		},
		"200forSaleEntriesUserGetResult": {
			    "type": "array",
			    "items": {
				      "$ref": "#/definitions/forSaleRecord"
			     }
		},
		"200forSaleEntriesPostResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": true
				      },
				      "msg": {
					      "type": "string",
						  "default": "Book has been posted for sale."
				      }
			     }
		},
		"200buyBookResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": true
				      },
				      "msg": {
					      "type": "string",
						  "default": "Book has put on hold."
				      }
			     }
		},
		"200getTransactionResult": {
			    "type": "array",
			    "items": {
				      "$ref": "#/definitions/transactionRecord"
			     }
		},
		"200transactionCompleteResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": true
				      },
				      "msg": {
					      "type": "string",
						  "default": "Transaction has been marked complete."
				      }
			     }
		},
		"200transactionCancelResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": true
				      },
				      "msg": {
					      "type": "string",
						  "default": "Transaction has been cancelled."
				      }
			     }
		},
		"200suggestedSalePriceResult": {
			    "type": "object",
			    "properties": {
				      "isbn": {
					      "type": "string",
						    "default": "9780133778816"
				      },
				      "suggestedSalePrice": {
                "type": "number",
					      "format": "double",
						    "default": 51.46
				      },
				      "reason": {
					      "type": "string",
						    "default": "The lowest price currently listed is $51.46."
				      }
			     }
		},
		"200thirdPartySalePriceResult": {
			    "type": "array",
			    "items": {
				      "$ref": "#/definitions/thirdPartySalePriceRecord"
			     }
		},
		"401Result": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": false
				      },
				      "msg": {
					      "type": "string",
						  "default": "Authentication failed."
				      }
			     }
		},
		"401AuthenticationResult": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": false
				      },
				      "msg": {
					      "type": "string",
						  "default": "Invalid credentials."
				      }
			     }
		},
		"500Result": {
			    "type": "object",
			    "properties": {
				      "success": {
					      "type": "boolean",
						  "default": false
				      },
				      "msg": {
					      "type": "string",
						  "default": "Internal Server Error."
				      }
			     }
		},
		"getRequiredTextbooksRecord": {
			    "type": "object",
			    "properties": {
				      "classNumber": {
					      "type": "string",
						    "default": "CS1336.001.17S"
				      },
					  "className": {
					      "type": "string",
						    "default": "Programming Fundamentals"
				      },
				      "classBooks": {
				        "type": "array",
				        "items": {
				          "$ref": "#/definitions/classBook" 
				        }
				      }
			     }
		},
		"classBook": {
			    "type": "object",
			    "properties": {
				      "bookName": {
					      "type": "string",
						    "default": "STARTING OUT WITH C++ FROM CNTRL (LOOSEPGS)(W/OUT ACCESS)"
				      },
				      "bookEdition": {
					      "type": "string",
						    "default": "PH 8th Edition 2015"
				      },
				      "bookAuthor": {
					      "type": "string",
						    "default": "GADDIS"
				      },
				      "bookISBN": {
					      "type": "string",
						    "default": "9780133778816"
				      },
				      "book_required_recommended": {
					      "type": "string",
						    "default": "Required Text"
				      }
			     }
		},
		"forSaleRecord": {
			    "type": "object",
			    "properties": {
				      "forSaleId": {
						"type": "integer",
						"format": "int",
						"default": 217
				      },
				      "isbn": {
					      "type": "string",
						    "default": "9780133778816"
				      },
				      "author": {
					      "type": "string",
						    "default": "GADDIS"
				      },
				      "price": {
					      "type": "number",
					      "format": "double",
						    "default": 37.92
				      },
				      "description": {
					      "type": "string",
						    "default": "Light wear, some hilighting"
				      }
			     }
		},
		"transactionRecord": {
			    "type": "object",
			    "properties": {
					"transactionId": {
						"type": "integer",
						"format": "int",
						"default": 139
					},
						"buyerOrSeller": {
						"type": "string",
						"default": "seller"
					},
						"buyer_Nickname": {
					    "type": "string",
						"default": "Daren C"
					},
						"buyer_InternalUserId": {
					    "type": "integer",
					    "format": "int",
						"default": 2
				    },
						"transactionDateTime": {
					    "type": "string",
						"default": "2017-02-22 00:02:40"
				    },
						"title": {
					    "type": "string",
						"default": "Software Engineering for Dummies"
					},
						"author": {
					    "type": "string",
						"default": "Wallace Wang"
					},
						"ISBN": {
					    "type": "string",
						"default": "9780133778816"
				    },
						"price": {
					    "type": "number",
					    "format": "double",
						"default": 101.99
				    }
			     }
		},
		"thirdPartySalePriceRecord": {
			    "type": "object",
			    "properties": {
				      "price": {
                "type": "number",
					      "format": "double",
						    "default": 51.46
				      },
				      "source": {
					      "type": "string",
						    "default": "Amazon"
				      },
				      "link": {
					      "type": "string",
						    "default": "https://www.amazon.com/Starting-Control-Structures-through-Objects/dp/0133778819/ref=sr_1_1?ie=UTF8&qid=1487534860&sr=8-1&keywords=9780133778816"
				      }
			     }
		},
		"Student": {
        "type": "object",
        "required": [ "name" ],
        "properties": {
            "name": {
                "type": "string"
            }
        }
    },
    "transactionStatusRecord": {
        "type": "object",
        "properties": {
			"id": {
				"type": "string",
				"default": "0"
			},
			"description": {
				"type": "string",
				"default": "Pending"
			}
		}
    }
    }
}   